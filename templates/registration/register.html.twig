{% extends 'base_client.html.twig' %}

{% block title %}CrÃ©er un compte{% endblock %}

{% block body %}
<div class="hf-auth-wrapper">
  <div class="hf-auth-card">

    <div class="hf-auth-header text-center mb-3">
      <div class="hf-auth-kicker">REJOINS-NOUS</div>
      <h2 class="hf-auth-title">ğŸ‘¤ CRÃ‰ER UN COMPTE</h2>
      <p class="hf-auth-subtitle">
        CrÃ©e ton espace personnel Health Fitness et suit tes progrÃ¨s.
      </p>
    </div>

    {{ form_start(registrationForm, {'attr': {'novalidate':'novalidate'}}) }}

    <div class="row g-3">
      <div class="col-md-6">
        {{ form_label(registrationForm.nom, 'ğŸ‘¤ Nom') }}
        {{ form_widget(registrationForm.nom, {
          attr: {class:'form-control form-control-lg', placeholder:'ğŸ‘¤ Ton nom'}
        }) }}
        {{ form_errors(registrationForm.nom) }}
      </div>

      <div class="col-md-6">
        {{ form_label(registrationForm.prenom, 'âœ¨ PrÃ©nom') }}
        {{ form_widget(registrationForm.prenom, {
          attr: {class:'form-control form-control-lg', placeholder:'âœ¨ Ton prÃ©nom'}
        }) }}
        {{ form_errors(registrationForm.prenom) }}
      </div>

      <div class="col-md-12">
        {{ form_label(registrationForm.dateNaissance, 'ğŸ‚ Date de naissance') }}
        {{ form_widget(registrationForm.dateNaissance, {
          attr: {class:'form-control form-control-lg'}
        }) }}
        {{ form_errors(registrationForm.dateNaissance) }}
      </div>

      <div class="col-md-12">
        {{ form_label(registrationForm.email, 'ğŸ“§ Email (Gmail)') }}
        {{ form_widget(registrationForm.email, {
          attr: {class:'form-control form-control-lg', placeholder:'ğŸ“§ ex: name@gmail.com'}
        }) }}
        {{ form_errors(registrationForm.email) }}
      </div>

      <div class="col-md-12">
        {{ form_label(registrationForm.plainPassword.first, 'ğŸ”’ Mot de passe') }}
        <div class="input-group">
          {{ form_widget(registrationForm.plainPassword.first, {
            attr: {class:'form-control form-control-lg', id:'reg_password'}
          }) }}
          <button class="btn btn-outline-secondary toggle-password"
                  type="button" data-target="reg_password">ğŸ‘</button>
        </div>
        {{ form_errors(registrationForm.plainPassword.first) }}
      </div>

      <div class="col-md-12">
        {{ form_label(registrationForm.plainPassword.second, 'âœ… Confirmer le mot de passe') }}
        <div class="input-group">
          {{ form_widget(registrationForm.plainPassword.second, {
            attr: {class:'form-control form-control-lg', id:'reg_password_confirm'}
          }) }}
          <button class="btn btn-outline-secondary toggle-password"
                  type="button" data-target="reg_password_confirm">ğŸ‘</button>
        </div>
        {{ form_errors(registrationForm.plainPassword.second) }}
      </div>

      <div class="col-md-12">
        <div class="form-check">
          {{ form_widget(registrationForm.agreeTerms, {attr:{class:'form-check-input'}}) }}
          {{ form_label(registrationForm.agreeTerms, "âœ… J'accepte les conditions", {label_attr:{class:'form-check-label'}}) }}
        </div>
        {{ form_errors(registrationForm.agreeTerms) }}
      </div>
    </div>

    <button type="submit" class="btn hf-auth-btn-primary btn-lg w-100 mt-3">
      ğŸš€ CRÃ‰ER MON COMPTE
    </button>

    <div class="text-center mt-3">
      <span class="text-muted">DÃ©jÃ  inscrit ?</span>
      <a href="{{ path('app_login') }}" class="fw-semibold hf-auth-link"> Se connecter</a>
    </div>

    {{ form_end(registrationForm) }}

  </div>
</div>

<script>
document.querySelectorAll('.toggle-password').forEach(function(btn) {
  btn.addEventListener('click', function () {
    const targetId = this.getAttribute('data-target');
    const input = document.getElementById(targetId);
    if (!input) return;
    input.type = (input.type === 'password') ? 'text' : 'password';
  });
});
</script>
{% endblock %}
