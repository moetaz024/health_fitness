{% extends 'base_client.html.twig' %}
{% block title %}Se connecter{% endblock %}

{% block body %}
<div class="hf-auth-wrapper">
  <div class="hf-auth-card">

    <div class="hf-auth-header text-center mb-3">
      <div class="hf-auth-kicker">RETOUR</div>
      <h2 class="hf-auth-title">ğŸ” SE CONNECTER</h2>
      <p class="hf-auth-subtitle">
        Entre ton Gmail et ton mot de passe pour accÃ©der Ã  Health Fitness.
      </p>
    </div>

    {% if error %}
      <div class="alert alert-danger border-0 shadow-sm mb-3">
        {{ error.messageKey|trans(error.messageData, 'security') }}
      </div>
    {% endif %}

    <form method="post" novalidate>

      <div class="mb-3">
        <label for="inputEmail" class="form-label">ğŸ“§ Gmail</label>
        <input type="email"
               value="{{ last_username }}"
               name="email"
               id="inputEmail"
               class="form-control form-control-lg"
               autocomplete="email"
               required
               autofocus
               placeholder="ğŸ“§ ex: name@gmail.com">
      </div>

      <div class="mb-3">
        <label for="inputPassword" class="form-label">ğŸ”’ Mot de passe</label>
        <div class="input-group">
          <input type="password"
                 name="password"
                 id="inputPassword"
                 class="form-control form-control-lg"
                 autocomplete="current-password"
                 required>
          <button class="btn btn-outline-secondary toggle-password"
                  type="button" data-target="inputPassword">ğŸ‘</button>
        </div>
      </div>

      <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

      <div class="d-flex justify-content-between align-items-center mb-3">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="_remember_me" id="remember_me">
          <label class="form-check-label" for="remember_me">
            ğŸ” Se souvenir de moi
          </label>
        </div>

        <a class="small text-muted" href="{{ path('app_forgot_password') }}">
          â“ Mot de passe oubliÃ© ?
        </a>
      </div>

      <button class="btn hf-auth-btn-primary btn-lg w-100" type="submit">
        ğŸš€ LOGIN
      </button>

      <div class="text-center mt-3">
        <span class="text-muted">Pas encore de compte ?</span>
        <a href="{{ path('app_register') }}" class="fw-semibold hf-auth-link"> CrÃ©er un compte</a>
      </div>

    </form>
  </div>
</div>

<script>
document.querySelectorAll('.toggle-password').forEach(function(btn) {
  btn.addEventListener('click', function () {
    const targetId = this.getAttribute('data-target');
    const input = document.getElementById(targetId);
    if (!input) return;
    input.type = (input.type === 'password') ? 'text' : 'password';
  });
});
</script>
{% endblock %}
